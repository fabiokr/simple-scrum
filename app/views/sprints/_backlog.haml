%table#kanban
  %caption
    = "#{t('app.sprints.backlog')}"
  %thead
    %tr
      %th{:class => 'span-4'}= "#{t('activerecord.models.story')}"
      %th{:class => 'span-4'}= "#{t('app.sprints.todo')}"
      %th{:class => 'span-4'}= "#{t('app.sprints.doing')}"
      %th{:class => 'span-4 last'}= "#{t('app.sprints.done')}"
  %tbody
    - group_tasks_by_story(@sprint).each do |story, tasks|
      - printed_story = false
      - tasks.each do |task|
        %tr
          - if printed_story == false
            %td{:rowspan => tasks.size}= print_story(story)
            - printed_story = true
          %td= print_task(task, Taskk::STATUS[0])
          %td= print_task(task, Taskk::STATUS[1])
          %td= print_task(task, Taskk::STATUS[2])

